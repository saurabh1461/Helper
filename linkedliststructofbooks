#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct book {
    char title[50];
    char author[50];
    char isbn[14];
    struct book *next;
};

void print_books(struct book *head) {
    printf("Title\tAuthor\tISBN\n");
    while (head != NULL) {
        printf("%s\t%s\t%s\n", head->title, head->author, head->isbn);
        head = head->next;
    }
}

struct book *search_books(struct book *head, char *query, int option) {
    struct book *result = NULL;
    while (head != NULL) {
        if (option == 1 && strcmp(head->title, query) == 0) {
            if (result == NULL) {
                result = head;
            } else {
                struct book *temp = result;
                while (temp->next != NULL) {
                    temp = temp->next;
                }
                temp->next = head;
            }
        } else if (option == 2 && strcmp(head->author, query) == 0) {
            if (result == NULL) {
                result = head;
            } else {
                struct book *temp = result;
                while (temp->next != NULL) {
                    temp = temp->next;
                }
                temp->next = head;
            }
        } else if (option == 3 && strcmp(head->isbn, query) == 0) {
            if (result == NULL) {
                result = head;
            } else {
                struct book *temp = result;
                while (temp->next != NULL) {
                    temp = temp->next;
                }
                temp->next = head;
            }
        }
        head = head->next;
    }
    return result;
}

int main() {
    struct book books[50];
    int n = 0;
    char choice = 'y';
    while (choice == 'y' || choice == 'Y') {
        printf("Enter details for book %d:\n", n+1);
        printf("Title: ");
        scanf("%s", books[n].title);
        printf("Author: ");
        scanf("%s", books[n].author);
        printf("ISBN: ");
        scanf("%s", books[n].isbn);
        books[n].next = NULL;
        n++;
        printf("Do you want to enter details for another book? (Y/N) ");
        scanf(" %c", &choice);
    }
    printf("You have entered the following books:\n");
    print_books(books);

    printf("\nSearch Books:\n");
    printf("1. By Title\n");
    printf("2. By Author\n");
    printf("3. By ISBN\n");
    printf("Enter your choice: ");
    int option;
    scanf("%d", &option);
    printf("Enter search query: ");
    char query[50];
    scanf("%s", query);
    struct book *result = search_books(books, query, option);
    if (result == NULL) {
        printf("No books found.\n");
    } else {
        printf("Books found:\n");
        print_books(result);
    }
    return 0;
}
